{
  "$schema": "https://shadcn-vue.com/schema/registry-item.json",
  "name": "Comp-2",
  "type": "registry:component",
  "description": "Monthly / yearly selects",
  "files": [
    {
      "path": "registry/default/components/Comp-2.vue",
      "content": "<script lang=\"ts\" setup>\r\nimport type { HTMLAttributes } from \"vue\";\r\nimport { reactiveOmit } from \"@vueuse/core\";\r\n\r\nimport {\r\n   CalendarCell,\r\n   CalendarCellTrigger,\r\n   CalendarGrid,\r\n   CalendarGridBody,\r\n   CalendarGridHead,\r\n   CalendarGridRow,\r\n   CalendarHeadCell,\r\n   CalendarHeader,\r\n} from \"@/registry/default/ui/calendar\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n   CalendarDate,\r\n   getLocalTimeZone,\r\n   today,\r\n   type DateValue,\r\n   createCalendar,\r\n   PersianCalendar,\r\n   toCalendar,\r\n   parseDate,\r\n} from \"@internationalized/date\";\r\nimport {\r\n   CalendarRoot,\r\n   type CalendarRootEmits,\r\n   type CalendarRootProps,\r\n   useForwardPropsEmits,\r\n} from \"reka-ui\";\r\nimport SelectContentGrid from \"../ui/SelectContentGrid.vue\";\r\nimport SelectItemButton from \"../ui/SelectItemButton.vue\";\r\n\r\nconst props = withDefaults(\r\n   defineProps<\r\n      CalendarRootProps & {\r\n         class?: HTMLAttributes[\"class\"];\r\n         showFooter?: boolean;\r\n      }\r\n   >(),\r\n   {\r\n      locale: \"fa-IR\",\r\n      showFooter: false,\r\n   },\r\n);\r\n\r\nconst emits = defineEmits<CalendarRootEmits>();\r\n\r\nconst delegatedProps = reactiveOmit(props, \"class\");\r\n\r\nconst forwarded = useForwardPropsEmits(delegatedProps, emits);\r\n\r\nconst todayDate = toCalendar(\r\n   today(getLocalTimeZone()),\r\n   createCalendar(\"persian\"),\r\n);\r\n\r\nconst modelValue = ref(todayDate) as Ref<DateValue>;\r\n\r\nconst selectedDate = ref({\r\n   month: todayDate.month,\r\n   year: todayDate.year,\r\n});\r\n\r\nconst placeholder = computed({\r\n   get: () =>\r\n      new CalendarDate(selectedDate.value.year, selectedDate.value.month, 1),\r\n   set: (newDate: DateValue) => {\r\n      selectedDate.value = {\r\n         year: newDate.year,\r\n         month: newDate.month,\r\n      };\r\n   },\r\n});\r\n\r\nconst monthNames = Array.from({ length: 12 }, (_, i) =>\r\n   new CalendarDate(new PersianCalendar(), todayDate.year, i + 1, 1)\r\n      .toDate(getLocalTimeZone())\r\n      .toLocaleString(\"fa-IR\", { month: \"long\" }),\r\n);\r\n\r\nconst years = Array.from({ length: 40 }, (_, i) => todayDate.year - 20 + i);\r\n\r\nconst footerDateString = computed(() => {\r\n   if (modelValue.value) {\r\n      return toCalendar(\r\n         parseDate(String(modelValue.value)),\r\n         createCalendar(\"persian\"),\r\n      )\r\n         .toDate(getLocalTimeZone())\r\n         .toLocaleString(\"fa-IR\", {\r\n            year: \"numeric\",\r\n            month: \"numeric\",\r\n            day: \"numeric\",\r\n         });\r\n   }\r\n});\r\n\r\nconst setToday = () => {\r\n   modelValue.value = todayDate;\r\n   selectedDate.value = {\r\n      year: todayDate.year,\r\n      month: todayDate.month,\r\n   };\r\n};\r\n</script>\r\n\r\n<template>\r\n   <div>\r\n      <CalendarRoot\r\n         data-slot=\"calendar\"\r\n         v-slot=\"{ weekDays, grid, weekStartsOn }\"\r\n         :class=\"\r\n            cn(\r\n               'bg-background rounded-lg border border-neutral-300 p-3',\r\n               props.class,\r\n            )\r\n         \"\r\n         v-bind=\"forwarded\"\r\n         v-model=\"modelValue\"\r\n         :placeholder=\"placeholder\"\r\n      >\r\n         <CalendarHeader class=\"flex justify-between\">\r\n            <div class=\"grid w-full grid-cols-2 items-center gap-2\">\r\n               <Select v-model=\"selectedDate.month\">\r\n                  <SelectTrigger size=\"sm\" class=\"w-full\">\r\n                     <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContentGrid :grid-cols=\"3\">\r\n                     <SelectItemButton\r\n                        v-for=\"(month, i) in monthNames\"\r\n                        :key=\"i\"\r\n                        :value=\"i + 1\"\r\n                     >\r\n                        {{ month }}\r\n                     </SelectItemButton>\r\n                  </SelectContentGrid>\r\n               </Select>\r\n               <Select v-model=\"selectedDate.year\">\r\n                  <SelectTrigger size=\"sm\" class=\"w-full\">\r\n                     <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContentGrid :grid-cols=\"3\">\r\n                     <SelectItemButton\r\n                        v-for=\"year in years\"\r\n                        :key=\"year\"\r\n                        :value=\"year\"\r\n                     >\r\n                        {{ year }}\r\n                     </SelectItemButton>\r\n                  </SelectContentGrid>\r\n               </Select>\r\n            </div>\r\n         </CalendarHeader>\r\n         <div\r\n            class=\"mt-4 flex flex-col gap-y-4 sm:flex-row sm:gap-x-4 sm:gap-y-0\"\r\n         >\r\n            <CalendarGrid v-for=\"month in grid\" :key=\"month.value.toString()\">\r\n               <CalendarGridHead>\r\n                  <CalendarGridRow>\r\n                     <CalendarHeadCell v-for=\"day in weekDays\" :key=\"day\">\r\n                        {{ day }}\r\n                     </CalendarHeadCell>\r\n                  </CalendarGridRow>\r\n               </CalendarGridHead>\r\n               <CalendarGridBody>\r\n                  <CalendarGridRow\r\n                     v-for=\"(weekDates, index) in month.rows\"\r\n                     :key=\"`weekDate-${index}`\"\r\n                     class=\"mt-2 w-full\"\r\n                  >\r\n                     <CalendarCell\r\n                        v-for=\"weekDate in weekDates\"\r\n                        :key=\"weekDate.toString()\"\r\n                        :date=\"weekDate\"\r\n                     >\r\n                        <CalendarCellTrigger\r\n                           :day=\"weekDate\"\r\n                           :month=\"month.value\"\r\n                        />\r\n                     </CalendarCell>\r\n                  </CalendarGridRow>\r\n               </CalendarGridBody>\r\n            </CalendarGrid>\r\n         </div>\r\n         <template v-if=\"showFooter\">\r\n            <Separator class=\"my-3\" />\r\n            <div class=\"flex items-center justify-between\">\r\n               <span class=\"text-xs\">{{ footerDateString }}</span>\r\n               <Button class=\"h-6 rounded-md px-2 text-xs\" @click=\"setToday\"\r\n                  >اکنون</Button\r\n               >\r\n            </div>\r\n         </template>\r\n      </CalendarRoot>\r\n   </div>\r\n</template>\r\n",
      "type": "registry:component"
    }
  ]
}